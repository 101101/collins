@(hostname: String)

@genURL() = @{
  "%s#hostname=%s".format(collins.monitoring.Icinga2Config.url, hostname)
}

<style type="text/css">
#icinga2-monitoring {
  width: 100%;
  height: 1200px;
}
</style>

<p>
<a href="@Html(genURL())" target="_blank" class="btn btn-primary">Open in new window</a>
</p>

<iframe id="icinga2-monitoring" src="" frameborder="0"></iframe>

<script type="text/javascript">
  $('a[data-toggle="pill"]').on('show', function(e) {
    var target = $(e.target)
    var iframe = $('#icinga2-monitoring')
    if (target.attr('href') === '#monitoring-info' && iframe.attr('src') === "") {
      iframe.attr('src', "@Html(genURL())")
    }
  })
</script>
